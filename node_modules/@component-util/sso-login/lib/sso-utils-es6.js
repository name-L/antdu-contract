/**
 * 获取指定产品ID的首页地址
 * @param cfg
 * @param appId
 */
function getAppHomeUrl(cfg, appId) {
    let {baseUrl} = safeJsonParse(cfg) || {};
    baseUrl = (baseUrl || '').replace(/\/+$/, '');
    return `${baseUrl}/${appId}/#`;
}

/**
 * 获取鹰击云的首页地址
 * @param cfg
 * @returns {string}
 */
function getSsoHomeUrl(cfg) {
    let {baseUrl} = safeJsonParse(cfg) || {};
    baseUrl = (baseUrl || '').replace(/\/+$/, '');
    return `${baseUrl}/index#`;
}

function safeJsonParse(json) {
    if (json && typeof(json) === 'string' && json.match(/^{.+}$/)) {
        try {
            return JSON.parse(json);
        } catch (ignore) {
        }
    } else if (typeof(json) === 'object') {
        return json;
    } else {
        return null;
    }
}

export default {
    getAppHomeUrl,
    getSsoHomeUrl
};

export {
    getAppHomeUrl,
    getSsoHomeUrl
};