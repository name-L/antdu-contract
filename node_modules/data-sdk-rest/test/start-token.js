/**
 * Created by wuyaoqian on 14-6-6.
 */

"use strict";

var tokenProvider = require("../lib/oauth/token-provider");

var requestUserToken = function (username, password) {
    function md5(text) {
        return require('crypto').createHash('md5').update(text).digest('hex');
    }

    tokenProvider.requestUserAccessToken(username, md5(password)).on("success", function (token) {
        console.log(token);
    }).on("error", function (result, response) {
        console.log(result);
    });
};

var refreshUserToken = function (refreshToken) {
    tokenProvider.refreshAccessToken(refreshToken).on("success", function (newToken) {
        console.log(newToken);
    }).on("error", function (result, response) {
        console.log(result);
    });
};

var refreshAppToken = function () {
    tokenProvider.fetchAppToken().on('success', function (token) {
        tokenProvider.refreshAccessToken(token.refresh_token).on("success", function (newToken) {
            console.log(newToken);
        }).on("error", function (result, response) {
            console.log(result);
        });
    });
};

//requestUserToken("wuyaoqian", "wuyaoqian1");
// refreshUserToken("3pANb86zr4ymbss0jYAbnfxG");
// refreshAppToken();
