/*!
 * Copyright (c) 2010-2017 EEFUNG Software Co.Ltd. All rights reserved.
 * 版权所有 (c) 2010-2017 湖南蚁坊软件股份有限公司。保留所有权利。
 */

"use strict";

/**
 *
 * Created by wuyaoqian on 2017/2/15.
 */

const promise = new Promise(function (resolve, reject) {
    // 会触发 error, success1, success1
    // reject('xy');

    // 会触发 error, success1, success1
    // x.x();

    // 会触发 error, success1, success1
    // (function a() {
    //     x.a();
    // })();

    // 不会触发任何 error, success1, success1
    // setTimeout(() => {
    //     x.y();
    // }, 0);

    // 不会触发任何 error, success1, success1
    // process.nextTick(() => {
    //     x.y();
    // });

    // 不会触发任何 error, success1, success1
    // function a() {
    //     x.a();
    // }
    // process.nextTick(() => {
    //     a();
    // });

    process.nextTick(() => {
        resolve('sss');
    });

}).catch((error) => {
    console.log('error:', error);
});

promise.then(function (data) {
    console.log('success1:', data);
}).then(function (data) {
    console.log('success11:', data);
}).catch(function (data) {
    console.log('error11:', data);
});

promise.then(function (data) {
    console.log('success2:', data);
}).then(function (data) {
    console.log('success22:', data);
}).catch(function (data) {
    console.log('error22:', data);
});