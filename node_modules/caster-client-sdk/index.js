/*!
 * Copyright (c) 2010-2020 EEFUNG Software Co.Ltd. All rights reserved.
 * 版权所有 (c) 2010-2020 湖南蚁坊软件股份有限公司。保留所有权利。
 */

"use strict";

/**
 * 在 nodejs 端处理 caster 的相关存储
 * Created by wuyaoqian on 16/3/29.
 */

var casterClient = require('./lib/caster-client.js');
var casterMap = require('./lib/caster-map.js');
var casterTopic = require('./lib/caster-topic.js');
var sessionStoreExpress = require('./lib/session-store.express.js');

module.exports = {
    /**
     * 使用方法:
     * require('path to this module').clientManage.getInstance().then(function(instance){
     *      instance.rawClient
     * })
     */
    clientManage: casterClient,
    /**
     * 使用方法:
     * require('path to this module').mapManage.getInstance(mapName, defaultExpirationTime).then(function(instance){
     *      instance.rawClient;
     *      instance.rawMap;
     *      instance.addEntryListener(listener, key, includeValue);
     *      instance.get(key, fn);
     *      instance.put(key, data, fn, ttl);
     *      instance.del(key, fn);
     * })
     */
    mapManage: casterMap,
    /**
     * 使用方法:
     * require('path to this module').topicManage.getInstance(topicName).then(function(instance){
     *      instance.rawClient;
     *      instance.rawTopic;
     *      instance.addMessageListener(listener);
     *      instance.publish(message);
     * })
     */
    topicManage: casterTopic,
    /**
     * 使用方法:
     * var HazelcastStore = require('path to this module').expressStore(exp_session);
     * var sessionStore = new HazelcastStore({
     *      storeCustomInfo: {
     *          key, data:function(req){}
     *      },
     *      resaveTime: 1000 * 30,
     *      connectedCallback: function(){}
     * }, mapName, defaultExpirationTime)
     */
    expressStore: sessionStoreExpress
};